<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<base th:replace="template :: base" />
<title th:text="${ video.getName() }"></title>

<link rel="stylesheet" type="text/css" href="css/lib/semantic.min.css" />
<link rel="stylesheet" type="text/css" href="css/page.css" />
<link rel="stylesheet" type="text/css" href="css/video.css" /> 

<script type="text/javascript" src="javascript/lib/jquery.js"></script>
<script type="text/javascript" src="javascript/lib/jquery.form.js"></script>
<script type="text/javascript" src="javascript/lib/semantic.js"></script>

<script type="text/javascript" src="javascript/password.js"></script>
<script type="text/javascript"></script>


<script type="text/javascript" src="javascript/video.js"></script>

</head>

<body>
<article class="ui container page">
	<section th:replace="template :: header"></section>
	<div class="ui divider"></div>
 

	<section id="page-content">
	<h2 id="video_title" class="ui header" th:text="${ video.getName() }" data-id="${ video.getId() }"></h2>
	<table>
		<tr>
			<td colspan="2">

				<video id="video1" width="440" height="330">
					<source th:src="@{${video.getPath() + '.mp4'}}" type="video/mp4" />
					<source th:src="@{${video.getPath() + '.webm'}}" type="video/webm" />

				<video id="video_player" controls="controls" preload="auto" width="800" height="450">
					<source type="video/mp4" th:src="${ video.getPath() } + '.mp4'"/>
					<source type="video/webm" th:src="${ video. getPath() } + '.webm'"/>
				</video>
				<br></br>
				<p>Current Comment: <span id="tComment"></span></p>
			</td>
			<td>
				<div id="comment_div" class="ui blue segment">
					<h3 class="ui header">Comments</h3>
					<ul id="comment_list" class="ui selection list">
						<li th:each="comment : ${video.getComments()}" th:attr="data-time=${comment.getPlaytime()}">
							<p class="comment_header">
								<span class="comment_playtime" th:attr="ct=${comment.getPlaytime()}" th:text="${ comment.playtimeInfo() }"></span>
								<span class="commenter" th:text="${ comment.getCommenter().getName() }"></span>
							</p>
							<p class="comment_content" th:text="${ comment.getContent() }"></p>
							<p class="comment_operation" th:if="${ comment.getCommenter().getUserId() == user_id }"
									th:attr="data-id=${ comment.getId() }">
								<a href="javascript:void(0);" onclick="editComment(event);">Edit</a>
								<a href="javascript:void(0);" onclick="deleteComment(event);">Delete</a>
							</p><br></br>
								<a href="javascript:void(0);" class="comment_edit">Edit</a>
								<a href="javascript:void(0);" class="comment_delete">Delete</a>
							</p>
						</li>
					</ul>
				</div>
			</td>
		</tr>
		<tr>
			<td>
			<form class="ui form" th:if="${null!=assessment&amp;&amp;assessment.canComment()}">
			    <div class="field">
			        <label>Add Comment</label><br></br>
				    <input type="text" id="comment" name="content"/>
				    <input type="button" class="ui blue button" id="comment_button" value="Submit" onclick="addComment()"/>
			    </div>
			</form>
			</td>
			<td>
				<form class="ui form" th:if="${ null != assessment &amp;&amp; assessment.canGrade() }">
			<td th:if="null != ${ assessment } and ${ assessment.canComment() }">
				<textarea id="comment"></textarea>
			</td>
			<td th:if="null != ${ assessment } and ${ assessment.canComment() }">
				<button class="ui blue button" id="comment_button" disabled="disabled">Submit</button>
			</td>
			<td>
				<form class="ui form" th:if="null != ${ assessment } and ${ assessment.canGrade() }">
					<div class="field">
						<label>Grade</label>
						<input type="number" min="0" max="100" name="grade" th:value="${ assessment.gradeValue() }"/>
					</div>
				</form>
				<!-- Average Grade: <span th:text="${ video.averageGrade() }"></span> -->
			</td>
		</tr>
	</table>
	</section>
	
	<div th:replace="template :: footer"></div>
</article>

<script> 
var myVideo = document.getElementById("video1"); 


//myVideo.currentTime = 60;
myVideo.controls=true;
myVideo.load();

/* myVideo.onplay = function() {setControls()};
function setControls(){
 	myVideo.controls = true;
} */

 myVideo.ontimeupdate = function() {checkComment()};
 
 function checkComment() {
	 
	document.getElementById("tComment").innerHTML = myVideo.currentTime;
 }

function setCurTime(t) {
	myVideo.currentTime = t;
}
/* function addComment(){
	 var form = document.forms[0];
	 form.action = "index.do";
	 form.method = "get";
	 form.submit();
 }  */

</script> 
</body>
</html>
