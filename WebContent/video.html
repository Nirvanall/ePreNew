<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<base th:replace="template :: base" />
<title th:text="${ video.getName() }"></title>

<link rel="stylesheet" type="text/css" href="css/lib/semantic.min.css" />
<link rel="stylesheet" type="text/css" href="css/page.css" />
<link rel="stylesheet" type="text/css" href="css/video.css" />

<script type="text/javascript" src="javascript/lib/jquery.js"></script>
<script type="text/javascript" src="javascript/lib/jquery.form.js"></script>
<script type="text/javascript" src="javascript/lib/semantic.js"></script>
<script type="text/javascript" src="javascript/video.js"></script>
</head>

<body>
<article class="ui container page">
	<section th:replace="template :: header"></section>
	<div class="ui divider"></div>
	
	<section id="page-content">
	<h2 class="ui header" th:text="${ video.getName() }"></h2>
	<table>
		<tr>
			<td colspan="2">
				<video id="videoPlayer" controls="controls" preload="auto" width="800" height="450">
					<source type="video/mp4" th:src="${ video.getPath() } + '.mp4'"/>
					<source type="video/webm" th:src="${ video. getPath() } + '.webm'"/>
				</video>
			</td>
			<td>
				<div id="comment_div" class="ui blue segment">
					<h3 class="ui header">Comments</h3>
					<ul id="comment_list">
						<li th:each="comment : ${video.getComments()}">
							<p class="comment_header">
								<span class="comment_playtime" th:text="${ comment.playtimeInfo() }"></span>
								<span class="commenter" th:text="${ comment.getCommenter().getName() }"></span>
							</p>
							<p class="comment_content" th:text="${ comment.getContent() }"></p>
							<p class="comment_operation" th:if="${ comment.getCommenter().getUserId() == user_id }"
									th:attr="data-id=${ comment.getId() }">
								<a href="javascript:void(0);" onclick="editComment(event);">Edit</a>
								<a href="javascript:void(0);" onclick="deleteComment(event);">Delete</a>
							</p>
						</li>
					</ul>
				</div>
			</td>
		</tr>
		<tr>
			<td th:if="null != ${ assessment } and ${ assessment.canComment() }">
				<textarea id="comment"></textarea>
			</td>
			<td th:if="null != ${ assessment } and ${ assessment.canComment() }">
				<button class="ui blue button" id="comment_button">Submit</button>
			</td>
			<td>
				<form class="ui form" th:if="null != ${ assessment } and ${ assessment.canGrade() }">
					<div class="field">
						<label>Grade</label>
						<input type="number" min="0" max="100" name="grade" th:value="${ assessment.gradeValue() }"/>
					</div>
				</form>
				Average Grade: <span th:text="${ video.averageGrade() }"></span>
			</td>
		</tr>
	</table>
	</section>
	
	<div th:replace="template :: footer"></div>
</article>
</body>
</html>
